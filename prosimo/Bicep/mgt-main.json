{
  "$schema": "https://schema.management.azure.com/schemas/2019-08-01/tenantDeploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.4.1124.51302",
      "templateHash": "9911298388519720030"
    }
  },
  "parameters": {
    "mgtGroupName": {
      "type": "string"
    },
    "managementGroupName": {
      "type": "string"
    },
    "principalId": {
      "type": "string"
    }
  },
  "resources": [
    {
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2020-10-01",
      "name": "deploy-mgttest",
      "scope": "[format('Microsoft.Management/managementGroups/{0}', parameters('mgtGroupName'))]",
      "location": "[deployment().location]",
      "properties": {
        "expressionEvaluationOptions": {
          "scope": "inner"
        },
        "mode": "Incremental",
        "parameters": {
          "managementGroupId": {
            "value": "[parameters('managementGroupName')]"
          },
          "principalId": {
            "value": "[parameters('principalId')]"
          }
        },
        "template": {
          "$schema": "https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#",
          "contentVersion": "1.0.0.0",
          "metadata": {
            "_generator": {
              "name": "bicep",
              "version": "0.4.1124.51302",
              "templateHash": "18373509561611399114"
            }
          },
          "parameters": {
            "managementGroupId": {
              "type": "string"
            },
            "principalId": {
              "type": "string"
            }
          },
          "variables": {
            "prosimoAppRole": "[json('{\r\n    \"properties\": {\r\n        \"roleName\": \"ProsimoAppRole\",\r\n        \"description\": \"Has required permissions to onboard apps in a customer''s subscription\",\r\n        \"assignableScopes\": [],\r\n        \"permissions\": [\r\n            {\r\n                \"actions\": [\r\n                    \"Microsoft.Resources/tags/delete\",\r\n                    \"Microsoft.Resources/tags/write\",\r\n                    \"Microsoft.Resources/tags/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/write\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/read\",\r\n                    \"Microsoft.Resources/subscriptions/resources/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/resources/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/operationstatuses/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/read\",\r\n                    \"Microsoft.Resources/subscriptions/providers/read\",\r\n                    \"Microsoft.Resources/subscriptions/operationresults/read\",\r\n                    \"Microsoft.Resources/subscriptions/locations/read\",\r\n                    \"Microsoft.Resources/subscriptions/read\",\r\n                    \"Microsoft.Resources/resources/read\",\r\n                    \"Microsoft.Resources/providers/read\",\r\n                    \"Microsoft.Resources/deployments/operations/read\",\r\n                    \"Microsoft.Resources/checkResourceName/action\",\r\n                    \"Microsoft.Authorization/roleDefinitions/read\",\r\n                    \"Microsoft.Authorization/roleAssignments/read\",\r\n                    \"Microsoft.Authorization/policySetDefinitions/read\",\r\n                    \"Microsoft.Authorization/policyAssignments/read\",\r\n                    \"Microsoft.Authorization/policyDefinitions/read\",\r\n                    \"Microsoft.ManagedIdentity/userAssignedIdentities/read\",\r\n                    \"Microsoft.ManagedIdentity/identities/read\",\r\n                    \"Microsoft.Compute/virtualMachines/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/vmSizes/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/ipConfigurations/publicIPAddresses/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/ipConfigurations/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/publicIPAddresses/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/networkInterfaces/read\",\r\n                    \"Microsoft.Network/virtualNetworkGateways/read\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualMachines/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/virtualMachines/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/contextualServiceEndpointPolicies/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/join/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/write\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/read\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/delete\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/read\",\r\n                    \"Microsoft.Network/virtualNetworks/usages/read\",\r\n                    \"Microsoft.Network/virtualNetworks/checkIpAddressAvailability/read\",\r\n                    \"Microsoft.Network/virtualNetworks/join/action\",\r\n                    \"Microsoft.Network/virtualNetworks/peer/action\",\r\n                    \"Microsoft.Network/virtualNetworks/joinLoadBalancer/action\",\r\n                    \"Microsoft.Network/virtualNetworks/write\",\r\n                    \"Microsoft.Network/virtualNetworks/read\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/delete\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/write\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/read\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/joinSubnet/action\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/join/action\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/delete\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/write\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/read\",\r\n                    \"Microsoft.Network/routeTables/routes/delete\",\r\n                    \"Microsoft.Network/routeTables/routes/write\",\r\n                    \"Microsoft.Network/routeTables/routes/read\",\r\n                    \"Microsoft.Network/routeTables/join/action\",\r\n                    \"Microsoft.Network/routeTables/write\",\r\n                    \"Microsoft.Network/routeTables/read\",\r\n                    \"Microsoft.Network/routeFilters/routeFilterRules/write\",\r\n                    \"Microsoft.Network/routeFilters/routeFilterRules/read\",\r\n                    \"Microsoft.Network/routeFilters/write\",\r\n                    \"Microsoft.Network/routeFilters/join/action\",\r\n                    \"Microsoft.Network/routeFilters/read\",\r\n                    \"Microsoft.Network/locations/supportedVirtualMachineSizes/read\",\r\n                    \"Microsoft.Network/locations/virtualNetworkAvailableEndpointServices/read\",\r\n                    \"Microsoft.Network/locations/usages/read\",\r\n                    \"Microsoft.Network/locations/serviceTags/read\",\r\n                    \"Microsoft.Network/locations/operationResults/read\",\r\n                    \"Microsoft.Network/locations/operations/read\",\r\n                    \"Microsoft.Network/locations/availableServiceAliases/read\",\r\n                    \"Microsoft.Network/locations/availablePrivateEndpointTypes/read\",\r\n                    \"Microsoft.Network/locations/autoApprovedPrivateLinkServices/read\",\r\n                    \"Microsoft.Network/locations/setLoadBalancerFrontendPublicIpAddresses/action\",\r\n                    \"Microsoft.Network/locations/checkPrivateLinkServiceVisibility/action\",\r\n                    \"Microsoft.Network/locations/checkAcceleratedNetworkingSupport/action\",\r\n                    \"Microsoft.Network/virtualWans/virtualHubs/read\",\r\n                    \"Microsoft.Network/virtualWans/write\",\r\n                    \"Microsoft.Network/virtualWans/read\",\r\n                    \"Microsoft.Network/virtualHubs/hubRouteTables/write\",\r\n                    \"Microsoft.Network/virtualHubs/hubRouteTables/read\",\r\n                    \"Microsoft.Network/virtualHubs/routeTables/write\",\r\n                    \"Microsoft.Network/virtualHubs/routeTables/read\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/delete\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/write\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/read\",\r\n                    \"Microsoft.Network/virtualHubs/effectiveRoutes/action\",\r\n                    \"Microsoft.Network/virtualHubs/write\",\r\n                    \"Microsoft.Network/virtualHubs/read\",\r\n                    \"Microsoft.Network/publicIPPrefixes/join/action\",\r\n                    \"Microsoft.Network/publicIPPrefixes/write\",\r\n                    \"Microsoft.Network/publicIPPrefixes/read\",\r\n                    \"Microsoft.Network/publicIPAddresses/join/action\",\r\n                    \"Microsoft.Network/publicIPAddresses/write\",\r\n                    \"Microsoft.Network/publicIPAddresses/read\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/delete\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/write\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/read\",\r\n                    \"Microsoft.Network/privateLinkServices/delete\",\r\n                    \"Microsoft.Network/privateLinkServices/write\",\r\n                    \"Microsoft.Network/privateLinkServices/read\",\r\n                    \"Microsoft.Network/privateEndpointRedirectMaps/write\",\r\n                    \"Microsoft.Network/privateEndpointRedirectMaps/read\",\r\n                    \"Microsoft.Network/privateEndpoints/privateDnsZoneGroups/write\",\r\n                    \"Microsoft.Network/privateEndpoints/privateDnsZoneGroups/read\",\r\n                    \"Microsoft.Network/privateEndpoints/delete\",\r\n                    \"Microsoft.Network/privateEndpoints/write\",\r\n                    \"Microsoft.Network/privateEndpoints/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/delete\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/write\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/defaultSecurityRules/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/join/action\",\r\n                    \"Microsoft.Network/networkSecurityGroups/delete\",\r\n                    \"Microsoft.Network/networkSecurityGroups/write\",\r\n                    \"Microsoft.Network/networkSecurityGroups/read\",\r\n                    \"Microsoft.Network/networkProfiles/setNetworkInterfaces/action\",\r\n                    \"Microsoft.Network/networkProfiles/removeContainers/action\",\r\n                    \"Microsoft.Network/networkProfiles/setContainers/action\",\r\n                    \"Microsoft.Network/networkProfiles/delete\",\r\n                    \"Microsoft.Network/networkProfiles/write\",\r\n                    \"Microsoft.Network/networkProfiles/read\",\r\n                    \"Microsoft.Network/networkInterfaces/loadBalancers/read\",\r\n                    \"Microsoft.Network/networkInterfaces/ipconfigurations/join/action\",\r\n                    \"Microsoft.Network/networkInterfaces/ipconfigurations/read\",\r\n                    \"Microsoft.Network/networkInterfaces/UpdateParentNicAttachmentOnElasticNic/action\",\r\n                    \"Microsoft.Network/networkInterfaces/effectiveNetworkSecurityGroups/action\",\r\n                    \"Microsoft.Network/networkInterfaces/effectiveRouteTable/action\",\r\n                    \"Microsoft.Network/networkInterfaces/delete\",\r\n                    \"Microsoft.Network/networkInterfaces/join/action\",\r\n                    \"Microsoft.Network/networkInterfaces/write\",\r\n                    \"Microsoft.Network/networkInterfaces/read\",\r\n                    \"Microsoft.Network/natGateways/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/virtualMachines/read\",\r\n                    \"Microsoft.Network/loadBalancers/probes/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/probes/read\",\r\n                    \"Microsoft.Network/loadBalancers/outboundRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/networkInterfaces/read\",\r\n                    \"Microsoft.Network/loadBalancers/loadBalancingRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/write\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatPools/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatPools/read\",\r\n                    \"Microsoft.Network/loadBalancers/frontendIPConfigurations/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/frontendIPConfigurations/read\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/write\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/read\",\r\n                    \"Microsoft.Network/loadBalancers/write\",\r\n                    \"Microsoft.Network/loadBalancers/read\",\r\n                    \"Microsoft.Network/ipGroups/join/action\",\r\n                    \"Microsoft.Network/ipGroups/updateReferences/action\",\r\n                    \"Microsoft.Network/ipGroups/validate/action\",\r\n                    \"Microsoft.Network/ipGroups/write\",\r\n                    \"Microsoft.Network/ipGroups/read\",\r\n                    \"Microsoft.Network/ipAllocations/delete\",\r\n                    \"Microsoft.Network/ipAllocations/write\",\r\n                    \"Microsoft.Network/ipAllocations/read\",\r\n                    \"Microsoft.Network/customIpPrefixes/delete\",\r\n                    \"Microsoft.Network/customIpPrefixes/write\",\r\n                    \"Microsoft.Network/customIpPrefixes/read\",\r\n                    \"Microsoft.Network/azureFirewallFqdnTags/read\",\r\n                    \"Microsoft.Network/azurefirewalls/read\",\r\n                    \"Microsoft.Network/operations/read\",\r\n                    \"Microsoft.Network/privateDnsZones/A/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/A/read\",\r\n                    \"Microsoft.Network/privateDnsZones/A/write\",\r\n                    \"Microsoft.Network/privateDnsZones/SOA/read\",\r\n                    \"Microsoft.Network/privateDnsZones/SOA/write\",\r\n                    \"Microsoft.Network/privateDnsZones/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/read\",\r\n                    \"Microsoft.Network/privateDnsZones/write\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/read\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/write\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableSslOptions/predefinedPolicies/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableSslOptions/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableServerVariables/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableResponseHeaders/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableRequestHeaders/read\",\r\n                    \"Microsoft.Network/ApplicationGatewayWebApplicationFirewallPolicies/write\",\r\n                    \"Microsoft.Network/ApplicationGatewayWebApplicationFirewallPolicies/read\",\r\n                    \"Microsoft.Network/applicationGateways/backendAddressPools/join/action\",\r\n                    \"Microsoft.Network/applicationGateways/getBackendHealthOnDemand/action\",\r\n                    \"Microsoft.Network/applicationGateways/backendhealth/action\",\r\n                    \"Microsoft.Network/applicationGateways/write\",\r\n                    \"Microsoft.Network/applicationGateways/read\"\r\n                ],\r\n                \"notActions\": [],\r\n                \"dataActions\": [],\r\n                \"notDataActions\": []\r\n            }\r\n        ]\r\n    }\r\n}')]",
            "prosimoInfraRole": "[json('{\r\n    \"properties\": {\r\n        \"roleName\": \"ProsimoEdgeRole\",\r\n        \"description\": \"Has required permissions for creating a prosimo edge in a subscription\",\r\n        \"assignableScopes\": [],\r\n        \"permissions\": [\r\n            {\r\n                \"actions\": [\r\n                    \"Microsoft.ContainerService/operations/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/upgradeProfiles/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/diagnosticsState/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/detectors/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/agentPools/upgradeProfiles/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/availableAgentPoolVersions/read\",\r\n                    \"Microsoft.ContainerService/locations/operationresults/read\",\r\n                    \"Microsoft.ContainerService/locations/operations/read\",\r\n                    \"Microsoft.ContainerService/locations/orchestrators/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/write\",\r\n                    \"Microsoft.ContainerService/managedClusters/delete\",\r\n                    \"Microsoft.ContainerService/managedClusters/listClusterAdminCredential/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/listClusterUserCredential/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/listClusterMonitoringUserCredential/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/resetServicePrincipalProfile/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/resetAADProfile/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/rotateClusterCertificates/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/privateEndpointConnectionsApproval/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/accessProfiles/listCredential/action\",\r\n                    \"Microsoft.ContainerService/managedClusters/accessProfiles/read\",\r\n                    \"Microsoft.ContainerService/managedClusters/agentPools/delete\",\r\n                    \"Microsoft.ContainerService/managedClusters/agentPools/write\",\r\n                    \"Microsoft.ContainerService/managedClusters/agentPools/read\",\r\n                    \"Microsoft.Resources/tags/delete\",\r\n                    \"Microsoft.Resources/tags/write\",\r\n                    \"Microsoft.Resources/tags/read\",\r\n                    \"Microsoft.Resources/subscriptions/resources/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/resources/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/operationstatuses/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/operations/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/write\",\r\n                    \"Microsoft.Resources/subscriptions/resourcegroups/deployments/read\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/delete\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/write\",\r\n                    \"Microsoft.Resources/subscriptions/resourceGroups/read\",\r\n                    \"Microsoft.Resources/subscriptions/providers/read\",\r\n                    \"Microsoft.Resources/subscriptions/operationresults/read\",\r\n                    \"Microsoft.Resources/subscriptions/locations/read\",\r\n                    \"Microsoft.Resources/subscriptions/read\",\r\n                    \"Microsoft.Resources/resources/read\",\r\n                    \"Microsoft.Resources/providers/read\",\r\n                    \"Microsoft.Resources/deployments/operations/read\",\r\n                    \"Microsoft.Resources/checkResourceName/action\",\r\n                    \"Microsoft.Authorization/roleDefinitions/read\",\r\n                    \"Microsoft.Authorization/roleAssignments/read\",\r\n                    \"Microsoft.Authorization/policySetDefinitions/read\",\r\n                    \"Microsoft.Authorization/policyAssignments/read\",\r\n                    \"Microsoft.Authorization/policyDefinitions/read\",\r\n                    \"Microsoft.ManagedIdentity/userAssignedIdentities/read\",\r\n                    \"Microsoft.ManagedIdentity/identities/read\",\r\n                    \"Microsoft.Compute/virtualMachines/vmSizes/read\",\r\n                    \"Microsoft.Compute/virtualMachines/extensions/delete\",\r\n                    \"Microsoft.Compute/virtualMachines/extensions/write\",\r\n                    \"Microsoft.Compute/virtualMachines/extensions/read\",\r\n                    \"Microsoft.Compute/virtualMachines/installPatches/action\",\r\n                    \"Microsoft.Compute/virtualMachines/performMaintenance/action\",\r\n                    \"Microsoft.Compute/virtualMachines/reimage/action\",\r\n                    \"Microsoft.Compute/virtualMachines/deallocate/action\",\r\n                    \"Microsoft.Compute/virtualMachines/restart/action\",\r\n                    \"Microsoft.Compute/virtualMachines/redeploy/action\",\r\n                    \"Microsoft.Compute/virtualMachines/reapply/action\",\r\n                    \"Microsoft.Compute/virtualMachines/powerOff/action\",\r\n                    \"Microsoft.Compute/virtualMachines/start/action\",\r\n                    \"Microsoft.Compute/virtualMachines/delete\",\r\n                    \"Microsoft.Compute/virtualMachines/write\",\r\n                    \"Microsoft.Compute/virtualMachines/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/vmSizes/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/ipConfigurations/publicIPAddresses/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/ipConfigurations/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/networkInterfaces/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/extensions/delete\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/extensions/write\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/extensions/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/simulateEviction/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/runCommand/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/performMaintenance/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/redeploy/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/reimageAll/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/deallocate/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/reimage/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/restart/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/powerOff/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/start/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/delete\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/write\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/virtualMachines/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/skus/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/rollingUpgrades/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/publicIPAddresses/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/osUpgradeHistory/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/networkInterfaces/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/instanceView/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/extensions/roles/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/extensions/delete\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/extensions/write\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/extensions/read\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/rollingUpgrades/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/setOrchestrationServiceState/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/osRollingUpgrade/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/scale/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/performMaintenance/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/redeploy/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/reimageAll/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/reimage/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/manualUpgrade/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/deallocate/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/restart/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/powerOff/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/start/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/delete/action\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/delete\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/write\",\r\n                    \"Microsoft.Compute/virtualMachineScaleSets/read\",\r\n                    \"Microsoft.Compute/sshPublicKeys/write\",\r\n                    \"Microsoft.Compute/sshPublicKeys/read\",\r\n                    \"Microsoft.Compute/skus/read\",\r\n                    \"Microsoft.Compute/operations/read\",\r\n                    \"Microsoft.Compute/locations/vmSizes/read\",\r\n                    \"Microsoft.Compute/locations/publishers/artifacttypes/types/versions/read\",\r\n                    \"Microsoft.Compute/locations/publishers/artifacttypes/types/read\",\r\n                    \"Microsoft.Compute/locations/publishers/artifacttypes/offers/skus/versions/read\",\r\n                    \"Microsoft.Compute/locations/publishers/artifacttypes/offers/skus/read\",\r\n                    \"Microsoft.Compute/locations/publishers/artifacttypes/offers/read\",\r\n                    \"Microsoft.Compute/locations/publishers/read\",\r\n                    \"Microsoft.Compute/locations/operations/read\",\r\n                    \"Microsoft.Compute/images/read\",\r\n                    \"Microsoft.Compute/galleries/read\",\r\n                    \"Microsoft.Network/checkFrontDoorNameAvailability/action\",\r\n                    \"Microsoft.Network/frontDoors/read\",\r\n                    \"Microsoft.Network/frontDoors/write\",\r\n                    \"Microsoft.Network/frontDoors/delete\",\r\n                    \"Microsoft.Network/frontDoors/backendPools/read\",\r\n                    \"Microsoft.Network/frontDoors/backendPools/write\",\r\n                    \"Microsoft.Network/frontDoors/backendPools/delete\",\r\n                    \"Microsoft.Network/frontDoors/frontendEndpoints/read\",\r\n                    \"Microsoft.Network/frontDoors/frontendEndpoints/write\",\r\n                    \"Microsoft.Network/frontDoors/frontendEndpoints/delete\",\r\n                    \"Microsoft.Network/frontDoors/frontendEndpoints/enableHttps/action\",\r\n                    \"Microsoft.Network/frontDoors/frontendEndpoints/disableHttps/action\",\r\n                    \"Microsoft.Network/frontDoors/healthProbeSettings/read\",\r\n                    \"Microsoft.Network/frontDoors/healthProbeSettings/write\",\r\n                    \"Microsoft.Network/frontDoors/healthProbeSettings/delete\",\r\n                    \"Microsoft.Network/frontDoors/loadBalancingSettings/read\",\r\n                    \"Microsoft.Network/frontDoors/loadBalancingSettings/write\",\r\n                    \"Microsoft.Network/frontDoors/loadBalancingSettings/delete\",\r\n                    \"Microsoft.Network/frontDoors/purge/action\",\r\n                    \"Microsoft.Network/frontDoors/routingRules/read\",\r\n                    \"Microsoft.Network/frontDoors/routingRules/write\",\r\n                    \"Microsoft.Network/frontDoors/routingRules/delete\",\r\n                    \"Microsoft.Network/frontDoors/rulesEngines/read\",\r\n                    \"Microsoft.Network/frontDoors/rulesEngines/write\",\r\n                    \"Microsoft.Network/frontDoors/rulesEngines/delete\",\r\n                    \"Microsoft.Network/frontDoors/validateCustomDomain/action\",\r\n                    \"Microsoft.Network/privateDnsZones/A/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/A/read\",\r\n                    \"Microsoft.Network/privateDnsZones/A/write\",\r\n                    \"Microsoft.Network/privateDnsZones/SOA/read\",\r\n                    \"Microsoft.Network/privateDnsZones/SOA/write\",\r\n                    \"Microsoft.Network/privateDnsZones/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/read\",\r\n                    \"Microsoft.Network/privateDnsZones/write\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/delete\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/read\",\r\n                    \"Microsoft.Network/privateDnsZones/virtualNetworkLinks/write\",\r\n                    \"Microsoft.Network/virtualNetworkGateways/read\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualMachines/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/virtualMachines/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/contextualServiceEndpointPolicies/read\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/join/action\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/delete\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/write\",\r\n                    \"Microsoft.Network/virtualNetworks/subnets/read\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/delete\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write\",\r\n                    \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings/read\",\r\n                    \"Microsoft.Network/virtualNetworks/usages/read\",\r\n                    \"Microsoft.Network/virtualNetworks/checkIpAddressAvailability/read\",\r\n                    \"Microsoft.Network/virtualNetworks/join/action\",\r\n                    \"Microsoft.Network/virtualNetworks/peer/action\",\r\n                    \"Microsoft.Network/virtualNetworks/joinLoadBalancer/action\",\r\n                    \"Microsoft.Network/virtualNetworks/delete\",\r\n                    \"Microsoft.Network/virtualNetworks/write\",\r\n                    \"Microsoft.Network/virtualNetworks/read\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/delete\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/write\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/serviceEndpointPolicyDefinitions/read\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/joinSubnet/action\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/join/action\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/delete\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/write\",\r\n                    \"Microsoft.Network/serviceEndpointPolicies/read\",\r\n                    \"Microsoft.Network/routeTables/routes/delete\",\r\n                    \"Microsoft.Network/routeTables/routes/write\",\r\n                    \"Microsoft.Network/routeTables/routes/read\",\r\n                    \"Microsoft.Network/routeTables/join/action\",\r\n                    \"Microsoft.Network/routeTables/delete\",\r\n                    \"Microsoft.Network/routeTables/write\",\r\n                    \"Microsoft.Network/routeTables/read\",\r\n                    \"Microsoft.Network/routeFilters/routeFilterRules/delete\",\r\n                    \"Microsoft.Network/routeFilters/routeFilterRules/write\",\r\n                    \"Microsoft.Network/routeFilters/routeFilterRules/read\",\r\n                    \"Microsoft.Network/routeFilters/write\",\r\n                    \"Microsoft.Network/routeFilters/delete\",\r\n                    \"Microsoft.Network/routeFilters/join/action\",\r\n                    \"Microsoft.Network/routeFilters/read\",\r\n                    \"Microsoft.Network/locations/supportedVirtualMachineSizes/read\",\r\n                    \"Microsoft.Network/locations/virtualNetworkAvailableEndpointServices/read\",\r\n                    \"Microsoft.Network/locations/usages/read\",\r\n                    \"Microsoft.Network/locations/serviceTags/read\",\r\n                    \"Microsoft.Network/locations/operationResults/read\",\r\n                    \"Microsoft.Network/locations/operations/read\",\r\n                    \"Microsoft.Network/locations/availableServiceAliases/read\",\r\n                    \"Microsoft.Network/locations/availablePrivateEndpointTypes/read\",\r\n                    \"Microsoft.Network/locations/autoApprovedPrivateLinkServices/read\",\r\n                    \"Microsoft.Network/locations/setLoadBalancerFrontendPublicIpAddresses/action\",\r\n                    \"Microsoft.Network/locations/checkPrivateLinkServiceVisibility/action\",\r\n                    \"Microsoft.Network/locations/checkAcceleratedNetworkingSupport/action\",\r\n                    \"Microsoft.network/virtualWans/p2sVpnServerConfigurations/delete\",\r\n                    \"Microsoft.network/virtualWans/p2sVpnServerConfigurations/write\",\r\n                    \"Microsoft.Network/virtualWans/p2sVpnServerConfigurations/read\",\r\n                    \"Microsoft.Network/virtualWans/vpnSites/read\",\r\n                    \"Microsoft.Network/virtualwans/supportedSecurityProviders/read\",\r\n                    \"Microsoft.Network/virtualWans/virtualHubs/read\",\r\n                    \"Microsoft.Network/virtualwans/generateVpnProfile/action\",\r\n                    \"Microsoft.Network/virtualwans/vpnServerConfigurations/action\",\r\n                    \"Microsoft.Network/virtualwans/vpnconfiguration/action\",\r\n                    \"Microsoft.Network/virtualWans/write\",\r\n                    \"Microsoft.Network/virtualWans/read\",\r\n                    \"Microsoft.Network/virtualWans/delete\",\r\n                    \"Microsoft.Network/virtualHubs/hubRouteTables/delete\",\r\n                    \"Microsoft.Network/virtualHubs/hubRouteTables/write\",\r\n                    \"Microsoft.Network/virtualHubs/hubRouteTables/read\",\r\n                    \"Microsoft.Network/virtualHubs/routeTables/delete\",\r\n                    \"Microsoft.Network/virtualHubs/routeTables/write\",\r\n                    \"Microsoft.Network/virtualHubs/routeTables/read\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/delete\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/write\",\r\n                    \"Microsoft.Network/virtualHubs/hubVirtualNetworkConnections/read\",\r\n                    \"Microsoft.Network/virtualHubs/effectiveRoutes/action\",\r\n                    \"Microsoft.Network/virtualHubs/write\",\r\n                    \"Microsoft.Network/virtualHubs/read\",\r\n                    \"Microsoft.Network/publicIPPrefixes/join/action\",\r\n                    \"Microsoft.Network/publicIPPrefixes/delete\",\r\n                    \"Microsoft.Network/publicIPPrefixes/write\",\r\n                    \"Microsoft.Network/publicIPPrefixes/read\",\r\n                    \"Microsoft.Network/publicIPAddresses/join/action\",\r\n                    \"Microsoft.Network/publicIPAddresses/delete\",\r\n                    \"Microsoft.Network/publicIPAddresses/write\",\r\n                    \"Microsoft.Network/publicIPAddresses/read\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/delete\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/write\",\r\n                    \"Microsoft.Network/privateLinkServices/privateEndpointConnections/read\",\r\n                    \"Microsoft.Network/privateLinkServices/delete\",\r\n                    \"Microsoft.Network/privateLinkServices/write\",\r\n                    \"Microsoft.Network/privateLinkServices/read\",\r\n                    \"Microsoft.Network/privateEndpointRedirectMaps/write\",\r\n                    \"Microsoft.Network/privateEndpointRedirectMaps/read\",\r\n                    \"Microsoft.Network/privateEndpoints/privateDnsZoneGroups/write\",\r\n                    \"Microsoft.Network/privateEndpoints/privateDnsZoneGroups/read\",\r\n                    \"Microsoft.Network/privateEndpoints/delete\",\r\n                    \"Microsoft.Network/privateEndpoints/write\",\r\n                    \"Microsoft.Network/privateEndpoints/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/delete\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/write\",\r\n                    \"Microsoft.Network/networkSecurityGroups/securityRules/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/defaultSecurityRules/read\",\r\n                    \"Microsoft.Network/networkSecurityGroups/join/action\",\r\n                    \"Microsoft.Network/networkSecurityGroups/delete\",\r\n                    \"Microsoft.Network/networkSecurityGroups/write\",\r\n                    \"Microsoft.Network/networkSecurityGroups/read\",\r\n                    \"Microsoft.Network/networkProfiles/setNetworkInterfaces/action\",\r\n                    \"Microsoft.Network/networkProfiles/removeContainers/action\",\r\n                    \"Microsoft.Network/networkProfiles/setContainers/action\",\r\n                    \"Microsoft.Network/networkProfiles/delete\",\r\n                    \"Microsoft.Network/networkProfiles/write\",\r\n                    \"Microsoft.Network/networkProfiles/read\",\r\n                    \"Microsoft.Network/networkInterfaces/loadBalancers/read\",\r\n                    \"Microsoft.Network/networkInterfaces/ipconfigurations/join/action\",\r\n                    \"Microsoft.Network/networkInterfaces/ipconfigurations/read\",\r\n                    \"Microsoft.Network/networkInterfaces/UpdateParentNicAttachmentOnElasticNic/action\",\r\n                    \"Microsoft.Network/networkInterfaces/effectiveNetworkSecurityGroups/action\",\r\n                    \"Microsoft.Network/networkInterfaces/effectiveRouteTable/action\",\r\n                    \"Microsoft.Network/networkInterfaces/delete\",\r\n                    \"Microsoft.Network/networkInterfaces/join/action\",\r\n                    \"Microsoft.Network/networkInterfaces/write\",\r\n                    \"Microsoft.Network/networkInterfaces/read\",\r\n                    \"Microsoft.Network/natGateways/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/virtualMachines/read\",\r\n                    \"Microsoft.Network/loadBalancers/probes/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/probes/read\",\r\n                    \"Microsoft.Network/loadBalancers/outboundRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/networkInterfaces/read\",\r\n                    \"Microsoft.Network/loadBalancers/loadBalancingRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/delete\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/write\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatRules/read\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatPools/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/inboundNatPools/read\",\r\n                    \"Microsoft.Network/loadBalancers/frontendIPConfigurations/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/frontendIPConfigurations/read\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/join/action\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/delete\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/write\",\r\n                    \"Microsoft.Network/loadBalancers/backendAddressPools/read\",\r\n                    \"Microsoft.Network/loadBalancers/delete\",\r\n                    \"Microsoft.Network/loadBalancers/write\",\r\n                    \"Microsoft.Network/loadBalancers/read\",\r\n                    \"Microsoft.Network/ipGroups/delete\",\r\n                    \"Microsoft.Network/ipGroups/join/action\",\r\n                    \"Microsoft.Network/ipGroups/updateReferences/action\",\r\n                    \"Microsoft.Network/ipGroups/validate/action\",\r\n                    \"Microsoft.Network/ipGroups/write\",\r\n                    \"Microsoft.Network/ipGroups/read\",\r\n                    \"Microsoft.Network/ipAllocations/delete\",\r\n                    \"Microsoft.Network/ipAllocations/write\",\r\n                    \"Microsoft.Network/ipAllocations/read\",\r\n                    \"Microsoft.Network/customIpPrefixes/delete\",\r\n                    \"Microsoft.Network/customIpPrefixes/write\",\r\n                    \"Microsoft.Network/customIpPrefixes/read\",\r\n                    \"Microsoft.Network/azureFirewallFqdnTags/read\",\r\n                    \"Microsoft.Network/azurefirewalls/read\",\r\n                    \"Microsoft.Network/operations/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableSslOptions/predefinedPolicies/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableSslOptions/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableServerVariables/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableResponseHeaders/read\",\r\n                    \"Microsoft.Network/applicationGatewayAvailableRequestHeaders/read\",\r\n                    \"Microsoft.Network/ApplicationGatewayWebApplicationFirewallPolicies/write\",\r\n                    \"Microsoft.Network/ApplicationGatewayWebApplicationFirewallPolicies/read\",\r\n                    \"Microsoft.Network/applicationGateways/backendAddressPools/join/action\",\r\n                    \"Microsoft.Network/applicationGateways/getBackendHealthOnDemand/action\",\r\n                    \"Microsoft.Network/applicationGateways/backendhealth/action\",\r\n                    \"Microsoft.Network/applicationGateways/write\",\r\n                    \"Microsoft.Network/applicationGateways/read\"\r\n                ],\r\n                \"notActions\": [],\r\n                \"dataActions\": [],\r\n                \"notDataActions\": []\r\n            }\r\n        ]\r\n    }\r\n}')]"
          },
          "resources": [
            {
              "type": "Microsoft.Authorization/roleDefinitions",
              "apiVersion": "2018-01-01-preview",
              "name": "[guid(variables('prosimoAppRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId)]",
              "properties": {
                "permissions": "[variables('prosimoAppRole').properties.permissions]",
                "assignableScopes": [
                  "[format('/providers/Microsoft.Management/managementGroups/{0}', parameters('managementGroupId'))]"
                ],
                "description": "[variables('prosimoAppRole').properties.description]",
                "roleName": "[variables('prosimoAppRole').properties.roleName]"
              }
            },
            {
              "type": "Microsoft.Authorization/roleDefinitions",
              "apiVersion": "2018-01-01-preview",
              "name": "[guid(variables('prosimoInfraRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId)]",
              "properties": {
                "permissions": "[variables('prosimoInfraRole').properties.permissions]",
                "assignableScopes": [
                  "[format('/providers/Microsoft.Management/managementGroups/{0}', parameters('managementGroupId'))]"
                ],
                "description": "[variables('prosimoInfraRole').properties.description]",
                "roleName": "[variables('prosimoInfraRole').properties.roleName]"
              }
            },
            {
              "type": "Microsoft.Authorization/roleAssignments",
              "apiVersion": "2020-08-01-preview",
              "name": "[guid(variables('prosimoAppRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId)]",
              "properties": {
                "principalId": "[parameters('principalId')]",
                "principalType": "ServicePrincipal",
                "roleDefinitionId": "[extensionResourceId(managementGroup().id, 'Microsoft.Authorization/roleDefinitions', guid(variables('prosimoAppRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId))]"
              },
              "dependsOn": [
                "[extensionResourceId(managementGroup().id, 'Microsoft.Authorization/roleDefinitions', guid(variables('prosimoAppRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId))]"
              ]
            },
            {
              "type": "Microsoft.Authorization/roleAssignments",
              "apiVersion": "2020-08-01-preview",
              "name": "[guid(variables('prosimoInfraRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId)]",
              "properties": {
                "principalId": "[parameters('principalId')]",
                "principalType": "ServicePrincipal",
                "roleDefinitionId": "[extensionResourceId(managementGroup().id, 'Microsoft.Authorization/roleDefinitions', guid(variables('prosimoInfraRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId))]"
              },
              "dependsOn": [
                "[extensionResourceId(managementGroup().id, 'Microsoft.Authorization/roleDefinitions', guid(variables('prosimoInfraRole').properties.roleName, parameters('managementGroupId'), tenant().tenantId))]"
              ]
            }
          ]
        }
      }
    }
  ]
}