{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "Test Form View",
            "steps": [
                {
                    "name": "basics",
                    "label": "Basics",
                    "elements": [
                        {
                            "name": "deploymentDetails",
                            "label": "Deployment Details",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "elements": [
                                {
                                    "name": "deploymentDetailsText",
                                    "type": "Microsoft.Common.TextBlock",
                                    "visible": true,
                                    "options": {
                                        "text": "Select the management group where the custom roles will be created and access will be scoped.",
                                        "link": {
                                            "label": "",
                                            "uri": ""
                                        }
                                    }
                                },
                                {
                                    "name": "managementGroupApi",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "/providers/Microsoft.Management/managementGroups?api-version=2020-05-01"
                                    }
                                },
                                {
                                    "name": "managementGroupId",
                                    "label": "Management Group",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "defaultValue": "",
                                    "toolTip": "Select the Management Group to Scope Prosimo Access.",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "filter": false,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": false,
                                    "constraints": {
                                        "allowedValues": "[map(steps('basics').deploymentDetails.managementGroupApi.value, (item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.id, '\",\"description\":\"', 'Management Group Name: ', item.managementGroupId, '\"}')))]",
                                        "required": true
                                    }
                                },                                
                                {
                                    "name": "infoBoxPrerequisites",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": true,
                                    "options": {
                                        "text": "This deployment will create 2 custom roles, a service principal, and assign these roles at the specified scope. The Prosimo AIR Engine then leverages the service principal and its assigned roles to orchestrate Prosimo Edge creation as well as the on-boarding of applications.",
                                        "style": "Info",
                                        "uri": "https://help.prosimo.io/hc/en-us/articles/360047151112"
                                    }
                                },
                                {
                                    "name": "ServicePrincipal",
                                    "type": "Microsoft.Common.ServicePrincipalSelector",
                                    "label": {
                                        "password": "Password",
                                        "certificateThumbprint": "Certificate thumbprint",
                                        "authenticationType": "Authentication Type",
                                        "sectionHeader": "Prosimo-AIR Service Principal"
                                    },
                                    "toolTip": {
                                        "password": "Password",
                                        "certificateThumbprint": "Certificate thumbprint",
                                        "authenticationType": "Authentication Type"
                                    },
                                    "defaultValue": {
                                        "principalId": "<default guid>",
                                        "name": "(New) default App Id"
                                    },
                                    "constraints": {
                                        "required": true
                                    },
                                    "options": {
                                        "hideCertificate": false
                                    },
                                    "visible": true
                                }

                            ]
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "principalId": "[steps('basics').deploymentDetails.ServicePrincipal]",
                "managementGroupId": "[steps('basics').deploymentDetails.managementGroupId]"
            },
            "kind": "Tenant"
        }        
    }
}