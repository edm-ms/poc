{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "Test Form View",
            "steps": [
                {
                    "name": "basics",
                    "label": "Basics",
                    "elements": [
                        {
                            "name": "introText",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                              "icon": "Info",
                              "text": "Select a subscription and resource group to store a deployment script. This script will run against the Prosimo REST API to onboard your selected Azure susbcriptions."
                            }
                          },
                        {
                            "name": "resourceScope",
                            "type": "Microsoft.Common.ResourceScope"
                        },   
                        {
                            "name": "deploymentDetails",
                            "label": "Prosimo Subscription Onboarding",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "elements": [
                                {
                                    "name": "prosimoTeamName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Prosimo Team Name",
                                    "defaultValue": "",
                                    "toolTip": "Enter the name of your Prosimo Team. You will have created this on your initial login.",
                                    "placeholder": "",
                                    "multiLine": false,
                                    "constraints": {
                                      "required": true,
                                      "validations": []
                                    },
                                    "visible": true
                                  },
                                  {
                                    "name": "prosimoApiKey",
                                    "type": "Microsoft.Common.PasswordBox",
                                    "label": {
                                      "password": "Prosimo API Token"
                                    },
                                    "toolTip": "",
                                    "constraints": {
                                      "required": true
                                    },
                                    "options": {
                                      "hideConfirmation": true
                                    },
                                    "visible": true
                                  },
                                      {
                                    "name": "subscriptionApi",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "subscriptions?api-version=2020-01-01"
                                    }
                                },
                                {
                                    "name": "subscriptionIds",
                                    "label": "Subscription",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "defaultValue": "",
                                    "toolTip": "Select the Subscription for your Data Landing Zone.",
                                    "multiselect": true,
                                    "selectAll": true,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('basics').deploymentDetails.subscriptionApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.id, '\",\"description\":\"', 'ID: ', item.subscriptionId, '\"}')))]",
                                        "required": true
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "kind": "Subscription",
            "location": "[steps('basics').resourceScope.location.name]",
            "subscriptionId": "[steps('basics').resourceScope.subscription.id]",
            "parameters": {
                "subscriptionList": "[steps('basics').deploymentDetails.subscriptionIds]",
                "subscriptionId": "[steps('basics').resourceScope.subscription.id]"
            }
        }        
    }
}