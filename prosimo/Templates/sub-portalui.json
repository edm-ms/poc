{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "Test Form View",
            "steps": [
                {
                    "name": "basics",
                    "label": "Basics",
                    "elements": [
                        {
                            "name": "deploymentDetails",
                            "label": "Deployment Details",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "elements": [
                                {
                                    "name": "deploymentDetailsText",
                                    "type": "Microsoft.Common.TextBlock",
                                    "visible": true,
                                    "options": {
                                        "text": "Select the subscription and resource group as well as the location to specify the scope of your Data Product deployment.",
                                        "link": {
                                            "label": "",
                                            "uri": ""
                                        }
                                    }
                                },
                                {
                                    "name": "subscriptionApi",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "subscriptions?api-version=2020-01-01"
                                    }
                                },
                                {
                                    "name": "subscriptionId",
                                    "label": "Subscription",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "defaultValue": "",
                                    "toolTip": "Select the Subscription of your Data Landing Zone.",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('basics').deploymentDetails.subscriptionApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.id, '\",\"description\":\"', 'ID: ', item.subscriptionId, '\"}')))]",
                                        "required": true
                                    }
                                },                                
                                {
                                    "name": "infoBoxPrerequisites",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": true,
                                    "options": {
                                        "text": "This deployment will create 2 service principals that will be used by Prosimo to scale your edge locations.",
                                        "style": "Info",
                                        "uri": ""
                                    }
                                },
                                {
                                    "name": "ServicePrincipal",
                                    "type": "Microsoft.Common.ServicePrincipalSelector",
                                    "label": {
                                        "password": "Password",
                                        "certificateThumbprint": "Certificate thumbprint",
                                        "authenticationType": "Authentication Type",
                                        "sectionHeader": "Service Principal"
                                    },
                                    "toolTip": {
                                        "password": "Password",
                                        "certificateThumbprint": "Certificate thumbprint",
                                        "authenticationType": "Authentication Type"
                                    },
                                    "defaultValue": {
                                        "principalId": "<default guid>",
                                        "name": "(New) default App Id"
                                    },
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-zA-Z0-9]{8,}$",
                                        "validationMessage": "Password must be at least 8 characters long, contain only numbers and letters"
                                    },
                                    "options": {
                                        "hideCertificate": false
                                    },
                                    "visible": true
                                }

                            ]
                        }
                    ]
                }
            ],
            "outputs": {
                "parameters": {
                    "axiPrincipal": "[steps('deploymentDetails').ServicePrincipal]"
                },
                "kind": "ResourceGroup"
            }
        }
    }
}